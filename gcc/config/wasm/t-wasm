MULTILIB_OPTIONS     =
MULTILIB_DIRNAMES    = wasm
MULTILIB_EXCEPTIONS  =
MULTILIB_MATCHES     =

install-driver: install-macros install-import-macros

install-macros: config/wasm/wasm-macros.s installdirs
	$(mkinstalldirs) $(DESTDIR)$(libsubdir)/gas-macros
	$(INSTALL_DATA) $< $(DESTDIR)$(libsubdir)/gas-macros/wasm-macros.s

install-import-macros: config/wasm/wasm-import-macros.s installdirs
	$(mkinstalldirs) $(DESTDIR)$(libsubdir)/gas-macros
	$(INSTALL_DATA) $< $(DESTDIR)$(libsubdir)/gas-macros/wasm-import-macros.s

gas-macros/wasm-macros.s: config/wasm/wasm-macros.s
	-if [ -d gas-macros ]; then true; else mkdir gas-macros; chmod a+rx gas-macros; fi
	cat $< > $@

gas-macros/wasm-import-macros.s: config/wasm/wasm-import-macros.s
	-if [ -d gas-macros ]; then true; else mkdir gas-macros; chmod a+rx gas-macros; fi
	cat $< > $@

wasm-c.o: $(srcdir)/config/wasm/wasm-c.c
	  $(COMPILE) $<
	  $(POSTCOMPILE)

wasm-cxx.o: $(srcdir)/config/wasm/wasm-cxx.c
	  $(COMPILE) $<
	  $(POSTCOMPILE)

GCC_PASSES += gas-macros/wasm-macros.s gas-macros/wasm-import-macros.s
