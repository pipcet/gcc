MULTILIB_OPTIONS     =
MULTILIB_DIRNAMES    = wasm32
MULTILIB_EXCEPTIONS  =
MULTILIB_MATCHES     =

install-driver: install-macros install-import-macros install-wasm32-headers

install-macros: config/wasm32/wasm32-macros.s installdirs
	$(mkinstalldirs) $(DESTDIR)$(libsubdir)/gas-macros
	$(INSTALL_DATA) $< $(DESTDIR)$(libsubdir)/gas-macros/wasm32-macros.s

install-import-macros: config/wasm32/wasm32-import-macros.s installdirs
	$(mkinstalldirs) $(DESTDIR)$(libsubdir)/gas-macros
	$(INSTALL_DATA) $< $(DESTDIR)$(libsubdir)/gas-macros/wasm32-import-macros.s

install-wasm32-headers: config/wasm32/wasm32-headers.o
	$(mkinstalldirs) $(DESTDIR)$(libsubdir)
	$(INSTALL_DATA) $< $(DESTDIR)$(libsubdir)/wasm32-headers.o

gas-macros/wasm32-macros.s: config/wasm32/wasm32-macros.s
	-if [ -d gas-macros ]; then true; else mkdir gas-macros; chmod a+rx gas-macros; fi
	cat $< > $@

gas-macros/wasm32-import-macros.s: config/wasm32/wasm32-import-macros.s
	-if [ -d gas-macros ]; then true; else mkdir gas-macros; chmod a+rx gas-macros; fi
	cat $< > $@

wasm32-c.o: $(srcdir)/config/wasm32/wasm32-c.c
	  $(COMPILE) $<
	  $(POSTCOMPILE)

wasm32-cxx.o: $(srcdir)/config/wasm32/wasm32-cxx.c
	  $(COMPILE) $<
	  $(POSTCOMPILE)

GCC_PASSES += gas-macros/wasm32-macros.s gas-macros/wasm32-import-macros.s
